(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const o=document.getElementById("product-card-template").content.cloneNode(!0);this.imageElement=o.querySelector(".product-image"),this.titleElement=o.querySelector(".product-title"),this.priceElement=o.querySelector(".product-price"),this.variantSelector=o.querySelector(".variant-selector"),this.addToCartButton=o.querySelector(".add-to-cart"),this.productLink=o.querySelector(".product-link"),this.soldOutTag=o.querySelector(".sold-out-tag");const d=this.getAttribute("data-title")||"No Title",t=this.getAttribute("data-image")||"",e=this.getAttribute("data-handle")||"#";let s=this.getAttribute("data-variants"),i={};if(s)try{i=JSON.parse(s)}catch{}let h=i.length>0?i[0].price:null,c=i.length>0?i[0].id:null,l=i.length>0&&i[0].available;this.imageElement.src=t,this.imageElement.alt=d,this.titleElement.textContent=d,this.priceElement.textContent=h,this.productLink.href=`/products/${e}`,this.updateAddToCartButton(l),this.toggleSoldOutTag(l),i.length?(i.forEach(r=>{const a=document.createElement("option");a.value=r.id,a.textContent=r.title,a.setAttribute("data-price",r.price),a.setAttribute("data-available",r.available),this.variantSelector.appendChild(a)}),this.variantSelector.addEventListener("change",r=>{const a=r.target.selectedOptions[0];this.priceElement.textContent=a.getAttribute("data-price"),c=a.value,l=a.getAttribute("data-available")==="true",this.updateAddToCartButton(l),this.toggleSoldOutTag(l)})):this.variantSelector.style.display="none",this.addToCartButton.addEventListener("click",()=>{l&&fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:c,quantity:1}]})}).then(r=>r.json()).then(r=>{window.location.href="/cart"}).catch(r=>{alert("There was an issue adding the item to your cart.")})}),this.shadowRoot.appendChild(o)}updateAddToCartButton(n){n?(this.addToCartButton.textContent="Add to Cart",this.addToCartButton.style.background="rgb(146 146 146)",this.addToCartButton.style.cursor="pointer",this.addToCartButton.removeAttribute("disabled")):(this.addToCartButton.textContent="Out of Stock",this.addToCartButton.setAttribute("disabled","true"))}toggleSoldOutTag(n){n?this.soldOutTag.style.display="none":this.soldOutTag.style.display="block"}}customElements.define("product-card",p);
